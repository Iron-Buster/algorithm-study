package com.fqh.æ»‘åŠ¨çª—å£;

import java.util.HashMap;
import java.util.HashSet;
import java.util.TreeSet;

/**
 * @author ikun
 * @version v1.0.0
 * @since 2024/1/12 22:55
 **/
public class LC_2398 {

    // ğŸˆæ€è·¯ï¼šé€šè¿‡æœ€å¤§è¿ç»­å¯ä»¥æƒ³åˆ°æ»‘åŠ¨çª—å£æ±‚è§£ï¼Œå¯¹äºå¦‚ä½•å¿«é€Ÿæ‰¾åˆ°å­æ•°ç»„çš„æœ€å¤§å€¼ï¼Œ
    // å¯ä»¥ç”¨å¹³è¡¡æ ‘æ¥ç»´æŠ¤ï¼ˆJavaä¸­çš„æœ‰åºé›†åˆTreeSetï¼‰ã€‚å¦‚æœçª—å£å†…çš„å¼€é”€å¤§äºäº†budgetï¼Œè¯´æ˜éœ€è¦ç¼©å°çª—å£ï¼ŒåŒæ—¶éœ€è¦åˆ¤æ–­TreeSetä¸­çš„æœ€å¤§å€¼æ˜¯å¦éœ€è¦è¢«ç§»é™¤ï¼Œ
    // æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªmapæ¥è®°å½•æ¯ä¸ªtimeå‡ºç°çš„æ¬¡æ•°ï¼Œå¦‚æœå‡ºç°æ¬¡æ•°=0ï¼Œä»mapç§»é™¤çš„åŒæ—¶ä¹Ÿéœ€è¦ä»TreeSetä¸­ç§»é™¤ã€‚

    // æ»‘åŠ¨çª—å£ + æœ‰åºé›†åˆ
    public int maximumRobots(int[] time, int[] run, long budget) {
        var tset = new TreeSet<Integer>((a, b) -> b.compareTo(a));
        var map = new HashMap<Integer, Integer>();
        int j = 0, ans = 0;
        long s = 0;
        for (int i = 0; i < time.length; i++) {
            s += run[i];
            tset.add(time[i]);
            map.merge(time[i], 1, Integer::sum);
            while (tset.first() + (i - j + 1) * s > budget) {
                s -= run[j];
                map.merge(time[j], -1, Integer::sum);
                if (map.get(time[j]) == 0) {
                    map.remove(time[j]);
                    tset.remove(time[j]); // ä»æœ‰åºé›†åˆä¸­ç§»é™¤
                }
                j++;
            }
            ans = Math.max(ans, i - j + 1);
        }
        return ans;
    }
//    2398. é¢„ç®—å†…çš„æœ€å¤šæœºå™¨äººæ•°ç›®
//            å°è¯•è¿‡
//    ç¬¬ 86 åœºåŒå‘¨èµ›
//            Q4
//    1917
//    ç›¸å…³æ ‡ç­¾
//            ç›¸å…³ä¼ä¸š
//    æç¤º
//    ä½ æœ‰ n ä¸ªæœºå™¨äººï¼Œç»™ä½ ä¸¤ä¸ªä¸‹æ ‡ä» 0 å¼€å§‹çš„æ•´æ•°æ•°ç»„ chargeTimes å’Œ runningCosts ï¼Œä¸¤è€…é•¿åº¦éƒ½ä¸º n ã€‚ç¬¬ i ä¸ªæœºå™¨äººå……ç”µæ—¶é—´ä¸º chargeTimes[i] å•ä½æ—¶é—´ï¼ŒèŠ±è´¹ runningCosts[i] å•ä½æ—¶é—´è¿è¡Œã€‚å†ç»™ä½ ä¸€ä¸ªæ•´æ•° budget ã€‚
//
//    è¿è¡Œ k ä¸ªæœºå™¨äºº æ€»å¼€é”€ æ˜¯ max(chargeTimes) + k * sum(runningCosts) ï¼Œå…¶ä¸­ max(chargeTimes) æ˜¯è¿™ k ä¸ªæœºå™¨äººä¸­æœ€å¤§å……ç”µæ—¶é—´ï¼Œsum(runningCosts) æ˜¯è¿™ k ä¸ªæœºå™¨äººçš„è¿è¡Œæ—¶é—´ä¹‹å’Œã€‚
//
//    è¯·ä½ è¿”å›åœ¨ ä¸è¶…è¿‡ budget çš„å‰æä¸‹ï¼Œä½  æœ€å¤š å¯ä»¥ è¿ç»­ è¿è¡Œçš„æœºå™¨äººæ•°ç›®ä¸ºå¤šå°‘ã€‚
//
//
//
//    ç¤ºä¾‹ 1ï¼š
//
//    è¾“å…¥ï¼šchargeTimes = [3,6,1,3,4], runningCosts = [2,1,3,4,5], budget = 25
//    è¾“å‡ºï¼š3
//    è§£é‡Šï¼š
//    å¯ä»¥åœ¨ budget ä»¥å†…è¿è¡Œæ‰€æœ‰å•ä¸ªæœºå™¨äººæˆ–è€…è¿ç»­è¿è¡Œ 2 ä¸ªæœºå™¨äººã€‚
//    é€‰æ‹©å‰ 3 ä¸ªæœºå™¨äººï¼Œå¯ä»¥å¾—åˆ°ç­”æ¡ˆæœ€å¤§å€¼ 3 ã€‚æ€»å¼€é”€æ˜¯ max(3,6,1) + 3 * sum(2,1,3) = 6 + 3 * 6 = 24 ï¼Œå°äº 25 ã€‚
//    å¯ä»¥çœ‹å‡ºæ— æ³•åœ¨ budget ä»¥å†…è¿ç»­è¿è¡Œè¶…è¿‡ 3 ä¸ªæœºå™¨äººï¼Œæ‰€ä»¥æˆ‘ä»¬è¿”å› 3 ã€‚
}
